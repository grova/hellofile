/*! jquery.jqmts 29-03-2014 */
!function(a,b){"use strict";var c={useNativeMenu:!1,attributes:{},showCounts:!0,className:"jqmts"},d=function(b,c){var d=a("<li></li>").addClass(c.className).prepend(a("<select></select>").attr({id:b.attr("id")+"-sort",name:b.attr("id")+"-sort","data-native-menu":c.useNativeMenu}).html(function(){var a=[];for(var b in c.attributes)a.push('<option value="'+b+'">'+c.attributes[b]+"</option>");return a.join("")}).on("change",function(d){a("li:not(."+c.className+")",b).tsort({data:"sort-"+d.currentTarget.value})}));b.prepend(d).trigger("create").listview("refresh")},e=function(c,d){var e=a("li:not(."+d.className+")",c),f=a("#"+c.attr("id")+"-sort"),g=b;if(e.each(function(){var b=a(this);for(var c in b.data())"undefined"==typeof g.sortKeys&&(g.sortKeys={}),c.indexOf("sort")>=0&&(g[c]||(g[c]={},g.sortKeys[c]=c),g[c][b.data(c)]=b.data(c))}),"undefined"!=typeof g.sortKeys){var h=function(b,c){a(this).val();return c+" ("+Object.keys(g[i]).length+")"};for(var i in g.sortKeys){var j=i.toLowerCase().replace("sort","");a("option[value="+j+"]",f).text(h)}f.selectmenu("refresh")}},f={init:function(f){return"object"!=typeof b.jQuery.tinysort?void b.alert("TinySort is not defined.\nhttp://tinysort.sjeiti.com/"):(this.jqmData("jqmts",a.extend({},c,f)),d(this,this.jqmData("jqmts")),f.showCounts&&e(this,this.jqmData("jqmts")),this)},destroy:function(){a(this).find("."+c.className).remove()}};a.fn.jqmts=function(a){return f[a]?f[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void 0:f.init.apply(this,arguments)}}(jQuery,window);